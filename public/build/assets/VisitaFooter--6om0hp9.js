import{K as v,o as n,d as i,a as s,k as m,L as k,e as p,F as y,g as M,n as g,f as h,M as w,v as b,t as f,r as C,C as O}from"./app-DO-5RY2c.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";const A={name:"NavBar",props:{userName:{type:String,default:"Sin Usuario"}},data(){return{searchQuery:"",filteredResults:[],selectedStyle:localStorage.getItem("selectedStyle")||"defecto",isDarkMode:JSON.parse(localStorage.getItem("isDarkMode"))||!1,isMenuOpen:!1,isSearchBarOpen:!1,activeMenu:null,menuOptions:{}}},methods:{toggleSearchBar(){this.isSearchBarOpen=!this.isSearchBarOpen,this.isSearchBarOpen||this.clearSearch()},clearSearch(){this.searchQuery="",this.filteredResults=[]},toggleMenu(){this.isMenuOpen=!this.isMenuOpen},showMenu(o){this.activeMenu=o},keepMenuOpen(o){this.activeMenu=o},hideMenu(){this.activeMenu=null},logout(){v.post(route("logout")).then(o=>{console.log(o.data.message),window.location.href=route("login")}).catch(o=>{console.error("Error al cerrar sesión:",o)})},updateStyles(){localStorage.setItem("selectedStyle",this.selectedStyle),localStorage.setItem("isDarkMode",JSON.stringify(this.isDarkMode));const e=`${window.location.origin}/inf513/grupo01cc/proyecto22/public/`+this.currentStyles[this.selectedStyle];document.querySelectorAll('link[rel="stylesheet"][data-page-style]').forEach(c=>c.remove());const l=document.createElement("link");l.rel="stylesheet",l.href=e,l.setAttribute("data-page-style","true"),document.head.appendChild(l)},fetchMenuOptions(){v.get(route("menus")).then(o=>{this.menuOptions=o.data}).catch(o=>{console.error("Error al obtener las opciones del menú:",o)})},async performSearch(){if(this.searchQuery.trim()===""){this.filteredResults=[];return}try{const o=await v.get(route("search"),{params:{query:this.searchQuery}});this.filteredResults=o.data}catch(o){console.error("Error en la búsqueda:",o)}}},computed:{currentStyles(){return{defecto:this.isDarkMode?"css/estiloPagClienteOscuro.css":"css/estiloPagClienteClaro.css",ninos:this.isDarkMode?"css/estiloPagNinoOscuro.css":"css/estiloPagNinoClaro.css",jovenes:this.isDarkMode?"css/estiloPagJovenOscuro.css":"css/estiloPagJovenClaro.css",adultos:this.isDarkMode?"css/estiloPagAdultoOscuro.css":"css/estiloPagAdultoClaro.css"}}},mounted(){if(this.updateStyles(),!document.querySelector('link[href*="font-awesome"]')){const o=document.createElement("link");o.href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css",o.rel="stylesheet",document.head.appendChild(o)}this.fetchMenuOptions()}},_={class:"navbar"},x={class:"navbar-container"},B={class:"search-wrapper"},D={key:0,class:"search-bar"},V={key:0,class:"fas fa-times"},Z={key:0,class:"dropdown-search-results"},P=["href"],E=["onMouseenter"],I=["onMouseenter"],N=["href"],Q={class:"user-controls"},H={class:"custom-select-wrapper"},R={class:"mode-switch"},j={class:"swap swap-rotate"},F={key:0,class:"swap-off h-10 w-10 fill-current sol",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},J={key:1,class:"swap-on h-10 w-10 fill-current luna",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},q={class:"user-info"},L={class:"greeting"};function T(o,e,l,c,a,r){return n(),i("nav",_,[s("div",x,[e[19]||(e[19]=s("a",{href:"/",class:"logo"},[s("span",{class:"logo-body"},"Body"),s("span",{class:"logo-fit"},"Fit")],-1)),s("div",{class:"hamburger-icon",onClick:e[0]||(e[0]=(...t)=>r.toggleMenu&&r.toggleMenu(...t))},e[12]||(e[12]=[s("i",{class:"fas fa-bars"},null,-1)])),s("div",B,[s("button",{class:"search-icon",onClick:e[1]||(e[1]=(...t)=>r.toggleSearchBar&&r.toggleSearchBar(...t))},e[13]||(e[13]=[s("i",{class:"fas fa-search"},null,-1)])),a.isSearchBarOpen?(n(),i("div",D,[m(s("input",{type:"text",class:"search-input",placeholder:"Buscar...","onUpdate:modelValue":e[2]||(e[2]=t=>a.searchQuery=t),onInput:e[3]||(e[3]=(...t)=>r.performSearch&&r.performSearch(...t))},null,544),[[k,a.searchQuery]]),s("button",{onClick:e[4]||(e[4]=(...t)=>r.clearSearch&&r.clearSearch(...t)),class:"search-clear-btn"},[a.searchQuery?(n(),i("i",V)):p("",!0)]),a.filteredResults.length?(n(),i("ul",Z,[(n(!0),i(y,null,M(a.filteredResults,(t,d)=>(n(),i("li",{key:d},[s("a",{href:t.ruta},[s("i",{class:g(t.icono)},null,2),h(" "+f(t.nombre),1)],8,P)]))),128))])):p("",!0)])):p("",!0)]),s("ul",{class:g(["nav-links",{active:a.isMenuOpen}])},[(n(!0),i(y,null,M(a.menuOptions,(t,d)=>(n(),i("li",{class:"nav-item",key:d},[s("button",{onMouseenter:u=>r.showMenu(d),onMouseleave:e[5]||(e[5]=(...u)=>r.hideMenu&&r.hideMenu(...u)),class:"accordion-toggle"},[s("i",{class:g(t.icono)},null,2),h(" "+f(d),1)],40,E),a.activeMenu===d?(n(),i("ul",{key:0,class:"dropdown-content",onMouseenter:u=>r.keepMenuOpen(d),onMouseleave:e[6]||(e[6]=(...u)=>r.hideMenu&&r.hideMenu(...u))},[(n(!0),i(y,null,M(t.opciones,u=>(n(),i("li",{key:u.nombre},[s("a",{href:u.ruta},[s("i",{class:g(u.icono)},null,2),h(" "+f(u.nombre),1)],8,N)]))),128))],40,I)):p("",!0)]))),128))],2),s("div",Q,[s("div",H,[e[15]||(e[15]=s("label",{for:"style-select"},[h(" TEMAS "),s("i",{class:"fas fa-chevron-down"})],-1)),m(s("select",{id:"style-select","onUpdate:modelValue":e[7]||(e[7]=t=>a.selectedStyle=t),onChange:e[8]||(e[8]=(...t)=>r.updateStyles&&r.updateStyles(...t))},e[14]||(e[14]=[s("option",{value:"defecto"},"Cliente",-1),s("option",{value:"ninos"},"Niños",-1),s("option",{value:"jovenes"},"Jóvenes",-1),s("option",{value:"adultos"},"Adultos",-1)]),544),[[w,a.selectedStyle]])]),s("div",R,[s("label",j,[m(s("input",{type:"checkbox",class:"theme-controller","onUpdate:modelValue":e[9]||(e[9]=t=>a.isDarkMode=t),onChange:e[10]||(e[10]=(...t)=>r.updateStyles&&r.updateStyles(...t))},null,544),[[b,a.isDarkMode]]),a.isDarkMode?p("",!0):(n(),i("svg",F,e[16]||(e[16]=[s("path",{d:"M5.64,17l-.71.71a1,1,0,0,0,0,1.41,1,1,0,0,0,1.41,0l.71-.71A1,1,0,0,0,5.64,17ZM5,12a1,1,0,0,0-1-1H3a1,1,0,0,0,0,2H4A1,1,0,0,0,5,12Zm7-7a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V4A1,1,0,0,0,12,5ZM5.64,7.05a1,1,0,0,0,.7.29,1,1,0,0,0,.71-.29,1,1,0,0,0,0-1.41l-.71-.71A1,1,0,0,0,4.93,6.34Zm12,.29a1,1,0,0,0,.7-.29l.71-.71a1,1,0,1,0-1.41-1.41L17,5.64a1,1,0,0,0,0,1.41A1,1,0,0,0,17.66,7.34ZM21,11H20a1,1,0,0,0,0,2h1a1,1,0,0,0,0-2Zm-9,8a1,1,0,0,0-1,1v1a1,1,0,0,0,2,0V20A1,1,0,0,0,12,19ZM18.36,17A1,1,0,0,0,17,18.36l.71.71a1,1,0,0,0,1.41,0,1,1,0,0,0,0-1.41ZM12,6.5A5.5,5.5,0,1,0,17.5,12,5.51,5.51,0,0,0,12,6.5Zm0,9A3.5,3.5,0,1,1,15.5,12,3.5,3.5,0,0,1,12,15.5Z"},null,-1)]))),a.isDarkMode?(n(),i("svg",J,e[17]||(e[17]=[s("path",{d:"M21.64,13a1,1,0,0,0-1.05-.14,8.05,8.05,0,0,1-3.37.73A8.15,8.15,0,0,1,9.08,5.49a8.59,8.59,0,0,1,.25-2A1,1,0,0,0,8,2.36,10.14,10.14,0,1,0,22,14.05,1,1,0,0,0,21.64,13Zm-9.5,6.69A8.14,8.14,0,0,1,7.08,5.22v.27A10.15,10.15,0,0,0,17.22,15.63a9.79,9.79,0,0,0,2.1-.22A8.11,8.11,0,0,1,12.14,19.73Z"},null,-1)]))):p("",!0)])]),s("div",q,[s("span",L,"Hola, "+f(l.userName),1),s("button",{onClick:e[11]||(e[11]=(...t)=>r.logout&&r.logout(...t)),class:"logout-btn"},e[18]||(e[18]=[s("i",{class:"fas fa-sign-out-alt"},null,-1),h(" Cerrar Sesión ")]))])])])])}const $=S(A,[["render",T],["__scopeId","data-v-4975e437"]]),U={name:"VisitaFooter",setup(){const o=C(0),e=async()=>{try{let l=window.location.pathname;const c="/inf513/grupo01cc/proyecto22/public";l.startsWith(c)&&(l=l.replace(c,""));const a=await v.get(route("api.visitas"),{params:{ruta:l}});a.data&&typeof a.data.visitas=="number"&&(o.value=a.data.visitas)}catch(l){console.error("Error al obtener las visitas:",l)}};return O(()=>{e()}),{visitaCount:o}}},z={class:"footer-container"},K={class:"visita-text"},W={class:"visita-count"};function G(o,e,l,c,a,r){return n(),i("footer",null,[s("div",z,[s("p",K,[e[0]||(e[0]=h(" Han visitado esta página ")),s("span",W,f(c.visitaCount),1),e[1]||(e[1]=h(" veces. "))])])])}const ee=S(U,[["render",G],["__scopeId","data-v-16b00e9a"]]);export{ee as V,$ as p};
